<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Hero</title>
    <link rel="stylesheet" href="styles.css">

    <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PSKHQBWH5Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-PSKHQBWH5Q');
  </script>
</head>
<body>
    <!-- Setup Screen -->
    <div id="setup-screen" class="screen active">
        <div class="container">
            <h1 class="title">Reading Hero</h1>
            <p class="subtitle">Practice reading words and sentences</p>

            <!-- Pre-made Word Lists -->
            <div class="premade-lists-section">
                <h3>Quick Start Word Lists</h3>
                <div class="premade-lists">
                    <button class="premade-list-btn" data-list="sight-words-k">
                        <span class="list-name">Sight Words (K)</span>
                    </button>
                    <button class="premade-list-btn" data-list="sight-words-1">
                        <span class="list-name">Sight Words (1st)</span>
                    </button>
                    <button class="premade-list-btn" data-list="cvc-words">
                        <span class="list-name">CVC Words</span>
                    </button>
                    <button class="premade-list-btn" data-list="simple-sentences">
                        <span class="list-name">Simple Sentences</span>
                    </button>
                </div>
            </div>

            <div class="input-section">
                <label for="word-input">Or enter your own words/sentences (one per line):</label>
                <textarea
                    id="word-input"
                    placeholder="cat&#10;dog&#10;The cat is big&#10;I love to read"
                    rows="6"
                ></textarea>
            </div>

            <!-- Difficulty Section -->
            <div class="difficulty-section">
                <h3>Difficulty Level</h3>
                <div class="difficulty-buttons">
                    <button class="difficulty-btn" data-difficulty="easy">
                        <span class="diff-name">Easy</span>
                        <span class="diff-desc">20s, relaxed matching</span>
                    </button>
                    <button class="difficulty-btn active" data-difficulty="medium">
                        <span class="diff-name">Medium</span>
                        <span class="diff-desc">10s, standard matching</span>
                    </button>
                    <button class="difficulty-btn" data-difficulty="hard">
                        <span class="diff-name">Hard</span>
                        <span class="diff-desc">5s, stricter matching</span>
                    </button>
                </div>
            </div>

            <!-- Settings Row -->
            <div class="settings-row">
                <div class="settings-section">
                    <div class="setting">
                        <label for="timer-setting">Time per word:</label>
                        <select id="timer-setting">
                            <option value="5">5 seconds</option>
                            <option value="10" selected>10 seconds</option>
                            <option value="15">15 seconds</option>
                            <option value="20">20 seconds</option>
                            <option value="30">30 seconds</option>
                        </select>
                    </div>
                </div>

                <div class="sound-toggle-section">
                    <label class="sound-toggle">
                        <input type="checkbox" id="sound-toggle" checked>
                        <span class="toggle-slider"></span>
                        <span class="toggle-label">Sound</span>
                    </label>
                </div>
            </div>

            <div class="puzzle-section">
                <h3>Puzzle Reward (Optional)</h3>
                <p class="puzzle-description">Upload an image to turn into a puzzle! Complete words to reveal pieces.</p>
                <div class="puzzle-upload">
                    <input type="file" id="puzzle-image-input" accept="image/*" hidden>
                    <button id="upload-puzzle-btn" class="btn btn-small">Choose Image</button>
                    <span id="puzzle-filename" class="puzzle-filename">No image selected</span>
                </div>
                <div id="puzzle-preview" class="puzzle-preview"></div>
            </div>

            <div class="saved-lists-section">
                <h3>Saved Word Lists</h3>
                <div id="saved-lists" class="saved-lists"></div>
            </div>

            <!-- Parent Dashboard Button -->
            <button id="dashboard-btn" class="btn btn-dashboard">
                Dashboard
            </button>

            <button id="start-btn" class="btn btn-primary">
                Start Game
            </button>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen">
        <button id="home-btn" class="home-btn" title="Return to Home">
            ‚Üê
        </button>

        <!-- Sound Toggle in Game -->
        <button id="game-sound-toggle" class="game-sound-toggle" title="Toggle Sound">
            ‚ô™
        </button>

        <div class="game-header">
            <div class="score-display">
                <span class="score-label">Score: </span>
                <span id="score" class="score-value">0</span> / <span id="total">0</span>
                <div id="score-popup" class="score-popup">+1</div>
            </div>

            <!-- Streak Counter -->
            <div id="streak-container" class="streak-container" style="display: none;">
                <span class="streak-fire">√ó</span>
                <span id="streak-count" class="streak-count">0</span>
            </div>

            <div class="progress-display">
                Word <span id="current-num">1</span> of <span id="total-words">0</span>
            </div>
        </div>

        <!-- Character Buddy -->
        <div id="character-buddy" class="character-buddy">
            <div class="buddy-emoji"></div>
            <div id="buddy-speech" class="buddy-speech"></div>
        </div>

        <!-- Puzzle Progress -->
        <div id="puzzle-container" class="puzzle-container">
            <div id="puzzle-grid" class="puzzle-grid"></div>
        </div>

        <div class="timer-container">
            <svg class="timer-ring" viewBox="0 0 100 100">
                <circle class="timer-ring-bg" cx="50" cy="50" r="45"/>
                <circle id="timer-ring-progress" class="timer-ring-progress" cx="50" cy="50" r="45"/>
            </svg>
            <div id="timer-text" class="timer-text">10</div>
        </div>

        <div id="word-display" class="word-display">
            <span id="current-word" class="current-word">Hello</span>
            <div id="word-progress" class="word-progress"></div>
        </div>

        <div class="mic-section">
            <div id="mic-indicator" class="mic-indicator">
                <div class="mic-icon">üé§</div>
                <div class="mic-waves">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            <p id="mic-status" class="mic-status">Listening...</p>
            <p id="heard-text" class="heard-text"></p>
        </div>

        <div id="feedback" class="feedback"></div>

        <button id="skip-btn" class="btn btn-secondary">Skip</button>
    </div>

    <!-- Results Screen -->
    <div id="results-screen" class="screen">
        <div class="container results-container">
            <div id="results-animation" class="results-animation"></div>
            <h1 class="results-title">Session Complete</h1>

            <div class="final-score">
                <div class="score-circle">
                    <span id="final-score">0</span>
                    <span class="score-divider">/</span>
                    <span id="final-total">0</span>
                </div>
                <p class="score-message" id="score-message"></p>
            </div>

            <div class="results-details">
                <div class="result-stat">
                    <span class="stat-icon">&#10003;</span>
                    <span id="correct-count">0</span> Correct
                </div>
                <div class="result-stat">
                    <span class="stat-icon">&#8250;</span>
                    <span id="skipped-count">0</span> Skipped
                </div>
                <div class="result-stat" id="best-streak-stat" style="display: none;">
                    <span class="stat-icon">&#215;</span>
                    <span id="best-streak">0</span> Best Streak
                </div>
            </div>

            <div id="missed-words-section" class="missed-words-section" style="display: none;">
                <h3>Words to Practice</h3>
                <ul id="missed-words-list" class="missed-words-list"></ul>
                <button id="practice-missed-btn" class="btn btn-practice">
                    Practice These Words
                </button>
            </div>

            <div class="results-buttons">
                <button id="play-again-btn" class="btn btn-primary">Play Again</button>
                <button id="new-words-btn" class="btn btn-secondary">New Words</button>
            </div>
        </div>
    </div>

    <!-- Parent Dashboard Screen -->
    <div id="dashboard-screen" class="screen">
        <div class="container dashboard-container">
            <button id="dashboard-back-btn" class="home-btn" title="Back">
                ‚Üê
            </button>
            <h1 class="dashboard-title">Dashboard</h1>

            <div class="dashboard-summary">
                <div class="summary-card">
                    <span id="total-sessions" class="summary-value">0</span>
                    <span class="summary-label">Sessions</span>
                </div>
                <div class="summary-card">
                    <span id="total-words-read" class="summary-value">0</span>
                    <span class="summary-label">Words Read</span>
                </div>
                <div class="summary-card">
                    <span id="avg-accuracy" class="summary-value">0%</span>
                    <span class="summary-label">Avg. Accuracy</span>
                </div>
                <div class="summary-card">
                    <span id="all-time-streak" class="summary-value">0</span>
                    <span class="summary-label">Best Streak</span>
                </div>
            </div>

            <div class="dashboard-section">
                <h3>Most Missed Words</h3>
                <div id="most-missed-words" class="most-missed-words">
                    <p class="no-data">No data yet. Complete a few sessions to see patterns.</p>
                </div>
            </div>

            <div class="dashboard-section">
                <h3>Recent Sessions</h3>
                <div id="session-history" class="session-history">
                    <p class="no-data">No sessions recorded yet.</p>
                </div>
            </div>

            <div class="dashboard-actions">
                <button id="clear-history-btn" class="btn btn-small btn-danger">Clear All Data</button>
            </div>
        </div>
    </div>

    <!-- Milestone Celebration Overlay -->
    <div id="milestone-overlay" class="milestone-overlay" style="display: none;">
        <div class="milestone-content">
            <div id="milestone-emoji" class="milestone-emoji"></div>
            <div id="milestone-text" class="milestone-text"></div>
        </div>
    </div>

    <!-- Confetti container -->
    <div id="confetti-container" class="confetti-container"></div>

    <script src="app.js"></script>
</body>
</html>
